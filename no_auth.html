<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATLAS Dashboard - No Auth</title>
    <style>
        body { font-family: Arial; padding: 2rem; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 2rem; border-radius: 10px; }
        .success { color: #28a745; }
        .info { color: #007bff; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="success">&#x2705; ATLAS Dashboard - Version Sans Auth</h1>
        <div class="info">
            <h3>&#x1F3AF; Cette version fonctionne IMMEDIATEMENT</h3>
            <p><strong>URL actuelle:</strong> <span id="currentUrl"></span></p>
            <p><strong>Timestamp:</strong> <span id="timestamp"></span></p>
            
            <h3>&#x1F4CA; Etat du Systeme</h3>
            <ul>
                <li>&#x2705; Azure Static Web Apps: FONCTIONNEL</li>
                <li>&#x2705; Deploiement automatique: FONCTIONNEL</li>
                <li>&#x2705; GitHub Actions: FONCTIONNEL</li>
                <li>&#x26A0;&#xFE0F; Authentification Azure AD: EN CONFIGURATION</li>
            </ul>
            
            <h3>&#x1F9EA; Test des Fonctionnalites</h3>
            <button onclick="testProxy()" style="padding: 0.5rem 1rem; background: #007bff; color: white; border: none; border-radius: 5px;">
                Tester Proxy GitHub
            </button>
            <div id="proxyResult" style="margin-top: 1rem;"></div>
        </div>
    </div>

    <script>
        document.getElementById('currentUrl').textContent = window.location.href;
        document.getElementById('timestamp').textContent = new Date().toLocaleString();
        
        async function testProxy() {
            const result = document.getElementById('proxyResult');
            result.innerHTML = '&#x1F504; Test du proxy...';
            
            try {
                const response = await fetch('https://syaga-atlas-proxy.azurewebsites.net/api/github-proxy', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ githubPath: '/repos/SYAGA-CONSULTING/SYAGA-ATLAS-DATA/contents/test.txt' })
                });
                
                if (response.ok) {
                    result.innerHTML = '&#x2705; Proxy GitHub fonctionne!';
                } else {
                    result.innerHTML = `&#x26A0;&#xFE0F; Proxy repond avec code: ${response.status}`;
                }
            } catch (error) {
                result.innerHTML = `&#x274C; Erreur proxy: ${error.message}`;
            }
        }
    </script>
</body>
</html>