<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìç ATLAS Roadbook - Vue Chronologique Claire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: #0a0a0a;
            color: #fff;
            padding: 20px;
            overflow-x: auto;
        }
        
        /* Container principal */
        .roadbook-container {
            max-width: 1600px;
            margin: 0 auto;
            background: #1a1a1a;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        
        /* Header avec m√©triques */
        .metrics-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
        }
        
        .metric-box {
            text-align: center;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .metric-label {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        
        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
        }
        
        .metric-value.green { color: #00ff41; }
        .metric-value.orange { color: #ffaa00; }
        .metric-value.blue { color: #00aaff; }
        
        /* Timeline principale */
        .timeline-container {
            position: relative;
            background: #0a0a0a;
            border-radius: 8px;
            padding: 20px;
            min-height: 500px;
        }
        
        /* √âchelle de temps en haut */
        .time-scale {
            display: flex;
            justify-content: space-between;
            padding: 0 60px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .time-mark {
            position: relative;
            color: #666;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .time-mark::after {
            content: '';
            position: absolute;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
            width: 1px;
            height: 450px;
            background: #333;
            z-index: 0;
        }
        
        /* Pistes */
        .tracks-container {
            position: relative;
            padding-left: 60px;
        }
        
        .track {
            position: relative;
            height: 80px;
            margin-bottom: 20px;
            background: #1a1a1a;
            border-radius: 8px;
            border: 2px solid #333;
            overflow: visible;
        }
        
        .track-label {
            position: absolute;
            left: -60px;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            text-align: right;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .track-content {
            position: relative;
            height: 100%;
            display: flex;
            align-items: center;
        }
        
        /* Track 1: Hosts/Serveurs */
        .track.hosts {
            border-color: #0078d4;
            background: linear-gradient(90deg, #1a1a1a 0%, #1e2a3a 100%);
        }
        
        .host-block {
            position: absolute;
            height: 60px;
            background: #2a4a6a;
            border: 2px solid #0078d4;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            transition: all 0.3s;
            z-index: 2;
        }
        
        .host-block.completed {
            background: #1a4a2a;
            border-color: #00ff41;
            color: #00ff41;
        }
        
        .host-block.active {
            background: #4a3a1a;
            border-color: #ffaa00;
            color: #ffaa00;
            box-shadow: 0 0 20px rgba(255,170,0,0.5);
            animation: pulse 1s infinite;
        }
        
        .host-block.pending {
            background: #2a2a2a;
            border-color: #666;
            color: #666;
            opacity: 0.7;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        /* Track 2: VMs/Migration */
        .track.vms {
            border-color: #00aaff;
            height: 60px;
        }
        
        .vm-status {
            position: absolute;
            height: 40px;
            background: #1a3a4a;
            border: 1px solid #00aaff;
            border-radius: 4px;
            padding: 5px 10px;
            display: flex;
            align-items: center;
            font-size: 0.8rem;
            z-index: 2;
        }
        
        .vm-status.running {
            background: #1a3a2a;
            border-color: #00ff41;
        }
        
        .vm-status.migrating {
            background: #4a3a1a;
            border-color: #ffaa00;
            animation: migrate 2s infinite;
        }
        
        @keyframes migrate {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(10px); }
        }
        
        .vm-status.stopped {
            background: #3a1a1a;
            border-color: #ff0040;
        }
        
        /* Track 3: R√©plication */
        .track.replication {
            border-color: #00ff41;
            height: 50px;
        }
        
        .repl-zone {
            position: absolute;
            height: 30px;
            top: 10px;
            border-radius: 4px;
            opacity: 0.8;
        }
        
        .repl-zone.active {
            background: linear-gradient(90deg, #1a4a2a 0%, #2a5a3a 100%);
            border: 1px solid #00ff41;
        }
        
        .repl-zone.suspended {
            background: linear-gradient(90deg, #4a1a1a 0%, #5a2a2a 100%);
            border: 1px solid #ff0040;
        }
        
        .repl-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: #000;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            z-index: 3;
        }
        
        .repl-indicator.suspend {
            background: #ff0040;
            color: #fff;
        }
        
        .repl-indicator.resume {
            background: #00ff41;
            color: #000;
        }
        
        /* Track 4: Backup */
        .track.backup {
            border-color: #ffaa00;
            height: 50px;
        }
        
        .backup-zone {
            position: absolute;
            height: 30px;
            top: 10px;
            border-radius: 4px;
        }
        
        .backup-zone.active {
            background: linear-gradient(90deg, #3a3a1a 0%, #4a4a2a 100%);
            border: 1px solid #ffaa00;
        }
        
        .backup-zone.suspended {
            background: repeating-linear-gradient(
                45deg,
                #3a1a1a,
                #3a1a1a 10px,
                #4a2a2a 10px,
                #4a2a2a 20px
            );
            border: 1px solid #ff0040;
        }
        
        /* Track 5: √âtat syst√®me */
        .track.system {
            border-color: #ff0040;
            height: 50px;
        }
        
        .system-event {
            position: absolute;
            height: 30px;
            top: 10px;
            padding: 5px 10px;
            background: #3a1a1a;
            border: 1px solid #ff0040;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            z-index: 2;
        }
        
        .system-event.reboot {
            background: #4a2a1a;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Ligne de progression actuelle */
        .current-time-line {
            position: absolute;
            top: 0;
            width: 3px;
            height: 100%;
            background: #00ff41;
            box-shadow: 0 0 20px #00ff41;
            z-index: 10;
            transition: left 0.5s;
        }
        
        .current-time-line::before {
            content: 'NOW';
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: #00ff41;
            color: #000;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
        }
        
        /* L√©gende */
        .legend {
            margin-top: 30px;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-color {
            width: 30px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid #444;
        }
        
        .legend-text {
            font-size: 0.85rem;
            color: #999;
        }
    </style>
</head>
<body>
    <div class="roadbook-container">
        <!-- Header avec m√©triques -->
        <div class="metrics-header">
            <div class="metric-box">
                <div class="metric-label">Temps √âcoul√©</div>
                <div class="metric-value green" id="elapsed">00:45:23</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Progression</div>
                <div class="metric-value orange" id="progress">35%</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Host Actuel</div>
                <div class="metric-value blue" id="current-host">HOST04</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Temps Restant</div>
                <div class="metric-value" id="remaining">01:14:37</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">√âtat Global</div>
                <div class="metric-value orange" id="status">UPDATING</div>
            </div>
        </div>
        
        <!-- Timeline principale -->
        <div class="timeline-container">
            <!-- √âchelle de temps -->
            <div class="time-scale">
                <div class="time-mark">14:00</div>
                <div class="time-mark">14:30</div>
                <div class="time-mark">15:00</div>
                <div class="time-mark">15:30</div>
                <div class="time-mark">16:00</div>
                <div class="time-mark">16:30</div>
                <div class="time-mark">17:00</div>
                <div class="time-mark">17:30</div>
                <div class="time-mark">18:00</div>
            </div>
            
            <!-- Ligne NOW -->
            <div class="current-time-line" style="left: 35%;"></div>
            
            <!-- Pistes -->
            <div class="tracks-container">
                <!-- Piste 1: HOSTS -->
                <div class="track hosts">
                    <div class="track-label" style="color: #0078d4;">HOSTS</div>
                    <div class="track-content">
                        <div class="host-block completed" style="left: 2%; width: 8%;">PRE</div>
                        <div class="host-block completed" style="left: 12%; width: 8%;">SUSPEND</div>
                        <div class="host-block active" style="left: 22%; width: 18%;">HOST04</div>
                        <div class="host-block pending" style="left: 42%; width: 15%;">HOST02</div>
                        <div class="host-block pending" style="left: 59%; width: 15%;">HOST01</div>
                        <div class="host-block pending" style="left: 76%; width: 15%;">HOST03</div>
                        <div class="host-block pending" style="left: 93%; width: 6%;">END</div>
                    </div>
                </div>
                
                <!-- Piste 2: VMs -->
                <div class="track vms">
                    <div class="track-label" style="color: #00aaff;">VMs</div>
                    <div class="track-content">
                        <div class="vm-status running" style="left: 2%; width: 20%;">üíæ DC: Running</div>
                        <div class="vm-status running" style="left: 2%; width: 20%; top: 25px;">üñ•Ô∏è RDS: Running</div>
                        <div class="vm-status stopped" style="left: 22%; width: 18%;">üíæ VEEAM: Stopped</div>
                        <div class="vm-status migrating" style="left: 42%; width: 15%;">üñ•Ô∏è RDS ‚Üí H01</div>
                        <div class="vm-status migrating" style="left: 59%; width: 15%;">üíæ DC ‚Üí H03</div>
                        <div class="vm-status migrating" style="left: 76%; width: 15%;">üóÑÔ∏è SQL ‚Üí H01</div>
                    </div>
                </div>
                
                <!-- Piste 3: R√âPLICATION -->
                <div class="track replication">
                    <div class="track-label" style="color: #00ff41;">REPL</div>
                    <div class="track-content">
                        <div class="repl-zone active" style="left: 2%; width: 10%;"></div>
                        <div class="repl-zone suspended" style="left: 12%; width: 10%;"></div>
                        <div class="repl-zone active" style="left: 22%; width: 20%;"></div>
                        <div class="repl-zone suspended" style="left: 42%; width: 15%;"></div>
                        <div class="repl-zone active" style="left: 57%; width: 2%;"></div>
                        <div class="repl-zone suspended" style="left: 59%; width: 15%;"></div>
                        <div class="repl-zone active" style="left: 74%; width: 2%;"></div>
                        <div class="repl-zone suspended" style="left: 76%; width: 15%;"></div>
                        <div class="repl-zone active" style="left: 91%; width: 8%;"></div>
                        
                        <span class="repl-indicator suspend" style="left: 11%;">‚è∏Ô∏è</span>
                        <span class="repl-indicator resume" style="left: 21%;">‚ñ∂Ô∏è</span>
                        <span class="repl-indicator suspend" style="left: 41%;">‚è∏Ô∏è</span>
                        <span class="repl-indicator resume" style="left: 56%;">‚ñ∂Ô∏è</span>
                        <span class="repl-indicator suspend" style="left: 58%;">‚è∏Ô∏è</span>
                        <span class="repl-indicator resume" style="left: 73%;">‚ñ∂Ô∏è</span>
                        <span class="repl-indicator suspend" style="left: 75%;">‚è∏Ô∏è</span>
                        <span class="repl-indicator resume" style="left: 90%;">‚ñ∂Ô∏è</span>
                    </div>
                </div>
                
                <!-- Piste 4: BACKUP -->
                <div class="track backup">
                    <div class="track-label" style="color: #ffaa00;">BACKUP</div>
                    <div class="track-content">
                        <div class="backup-zone active" style="left: 2%; width: 10%;"></div>
                        <div class="backup-zone suspended" style="left: 12%; width: 81%;"></div>
                        <div class="backup-zone active" style="left: 93%; width: 6%;"></div>
                        
                        <span class="repl-indicator suspend" style="left: 11%;">‚è∏Ô∏è SUSPEND ALL</span>
                        <span class="repl-indicator resume" style="left: 85%;">‚ñ∂Ô∏è RESUME ALL</span>
                    </div>
                </div>
                
                <!-- Piste 5: SYST√àME -->
                <div class="track system">
                    <div class="track-label" style="color: #ff0040;">SYSTEM</div>
                    <div class="track-content">
                        <div class="system-event" style="left: 2%; width: 8%;">üîç Checks</div>
                        <div class="system-event reboot" style="left: 35%; width: 5%;">üîÑ H04</div>
                        <div class="system-event" style="left: 52%; width: 5%; opacity: 0.5;">üîÑ H02</div>
                        <div class="system-event" style="left: 69%; width: 5%; opacity: 0.5;">üîÑ H01</div>
                        <div class="system-event" style="left: 86%; width: 5%; opacity: 0.5;">üîÑ H03</div>
                        <div class="system-event" style="left: 93%; width: 6%;">‚úÖ Valid</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- L√©gende -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #1a4a2a; border-color: #00ff41;"></div>
                <span class="legend-text">Compl√©t√©</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #4a3a1a; border-color: #ffaa00;"></div>
                <span class="legend-text">En cours</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #2a2a2a; border-color: #666;"></div>
                <span class="legend-text">En attente</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #3a1a1a; border-color: #ff0040;"></div>
                <span class="legend-text">Suspendu</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #1a3a2a; border-color: #00ff41;"></div>
                <span class="legend-text">Actif</span>
            </div>
        </div>
    </div>
    
    <script>
        // √âtat du syst√®me
        let systemState = {
            startTime: Date.now() - (45 * 60 * 1000 + 23 * 1000),
            totalDuration: 2 * 60 * 60 * 1000, // 2 heures
            currentProgress: 35,
            currentHost: 'HOST04',
            hostProgress: 65
        };
        
        // Mise √† jour temps r√©el
        function updateMetrics() {
            const now = Date.now();
            const elapsed = now - systemState.startTime;
            const remaining = systemState.totalDuration - elapsed;
            
            // Temps √©coul√©
            const elapsedH = Math.floor(elapsed / 3600000);
            const elapsedM = Math.floor((elapsed % 3600000) / 60000);
            const elapsedS = Math.floor((elapsed % 60000) / 1000);
            document.getElementById('elapsed').textContent = 
                `${String(elapsedH).padStart(2, '0')}:${String(elapsedM).padStart(2, '0')}:${String(elapsedS).padStart(2, '0')}`;
            
            // Temps restant
            const remainingH = Math.floor(remaining / 3600000);
            const remainingM = Math.floor((remaining % 3600000) / 60000);
            const remainingS = Math.floor((remaining % 60000) / 1000);
            document.getElementById('remaining').textContent = 
                `${String(remainingH).padStart(2, '0')}:${String(remainingM).padStart(2, '0')}:${String(remainingS).padStart(2, '0')}`;
            
            // Progression
            document.getElementById('progress').textContent = `${Math.round(systemState.currentProgress)}%`;
            
            // D√©placer la ligne NOW
            document.querySelector('.current-time-line').style.left = `${systemState.currentProgress}%`;
        }
        
        // Simulation de progression
        function simulateProgress() {
            setInterval(() => {
                if (systemState.currentProgress < 100) {
                    systemState.currentProgress += 0.1;
                    systemState.hostProgress += 0.3;
                    
                    if (systemState.hostProgress >= 100) {
                        // Passer au host suivant
                        nextHost();
                    }
                }
            }, 1000);
        }
        
        function nextHost() {
            const hosts = ['HOST04', 'HOST02', 'HOST01', 'HOST03'];
            const currentIndex = hosts.indexOf(systemState.currentHost);
            if (currentIndex < hosts.length - 1) {
                systemState.currentHost = hosts[currentIndex + 1];
                systemState.hostProgress = 0;
                document.getElementById('current-host').textContent = systemState.currentHost;
                
                // Mettre √† jour les blocs visuels
                document.querySelectorAll('.host-block').forEach((block, i) => {
                    if (i <= currentIndex + 2) {
                        block.classList.remove('pending', 'active');
                        block.classList.add('completed');
                    } else if (i === currentIndex + 3) {
                        block.classList.remove('pending', 'completed');
                        block.classList.add('active');
                    }
                });
            }
        }
        
        // D√©marrer les mises √† jour
        setInterval(updateMetrics, 1000);
        simulateProgress();
        
        // Animation de la ligne de progression
        setInterval(() => {
            const line = document.querySelector('.current-time-line');
            line.style.boxShadow = `0 0 ${20 + Math.sin(Date.now() / 200) * 10}px #00ff41`;
        }, 50);
    </script>
</body>
</html>